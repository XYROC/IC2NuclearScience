package nuclearscience.network;

import java.io.IOException;

import cpw.mods.fml.common.network.internal.FMLProxyPacket;
import cpw.mods.fml.relauncher.Side;
import io.netty.buffer.ByteBuf;
import io.netty.buffer.ByteBufInputStream;
import io.netty.buffer.ByteBufOutputStream;
import io.netty.buffer.Unpooled;
import net.minecraft.client.Minecraft;
import net.minecraft.nbt.NBTTagCompound;
import net.minecraft.tileentity.TileEntity;
import net.minecraft.world.World;
import nuclearscience.NuclearScience;

public class Packets {

	public static final int packetTileData = 0;

	public static FMLProxyPacket createTileEnergyPacket(TileEntity tile) throws IOException {
		NBTTagCompound nbt = new NBTTagCompound();
		tile.readFromNBT(nbt);
		ByteBufOutputStream bbos = new ByteBufOutputStream(Unpooled.buffer());
		bbos.writeDouble(nbt.getDouble("energy"));
		bbos.close();
		FMLProxyPacket packet = new FMLProxyPacket(bbos.buffer(), NuclearScience.name);
		return packet;
	}
	
	public static void processPacketOnClientSide(ByteBuf parBB, Side parSide) throws IOException
	{
		if (parSide == Side.CLIENT)
		{
			// DEBUG
			System.out.println("Received PacketWildAnimals on Client Side");

			World theWorld = Minecraft.getMinecraft().theWorld;
			ByteBufInputStream bbis = new ByteBufInputStream(parBB);

			// process data stream
			// first read packet type
			int packetTypeID = bbis.readInt();

			switch (packetTypeID)
			{
				case packetTileData:
				{
					
				}
			}

			bbis.close();			
		}
	}

}
